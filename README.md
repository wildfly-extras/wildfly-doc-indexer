# WildFly Documentation Indexer

The WildFly Documentation Indexer is a Maven-based tool designed to extract searchable content from WildFly documentation HTML files and generate a client-side search index. This tool processes HTML documentation files generated from AsciiDoc sources and creates a JSON index that can be consumed by JavaScript search plugins for fast, client-side document searching.

## Purpose

This project serves the WildFly documentation ecosystem by:

- **Extracting searchable content** from HTML documentation files generated by AsciiDoctor
- **Creating a structured index** that contains titles, content, and URLs from the documentation
- **Enabling client-side search functionality** through a lightweight JSON index
- **Supporting fast, responsive searches** without requiring server-side search infrastructure

## Prerequisites

- **Java 11 or higher**
- **Apache Maven 3.6.0 or higher**
- **WildFly documentation HTML files** (generated from .adoc sources)

## Building the Project

To build the wildfly-doc-indexer project from source:

```bash
cd wildfly-doc-indexer
mvn clean package
```

This command will:
- Clean any previous build artifacts
- Compile the Java source code
- Run any unit tests
- Package the application into an executable JAR file
- Generate the final artifact: `target/wildfly-doc-indexer-1.0-SNAPSHOT.jar`

## Running the Indexer

After building the project, you can execute the indexer to generate the search index:

```bash
java -jar ./target/wildfly-doc-indexer-1.0-SNAPSHOT.jar --work-dir=../ --output-dir=../
```

### Command Line Arguments

- `--work-dir=../`: Specifies the working directory containing the documentation HTML files (relative to the indexer directory)
- `--output-dir=../`: Specifies the output directory where the generated index file will be written

### How It Works

When executed with the above command:

1. **Source Discovery**: The indexer scans the parent directory (`../`) for HTML documentation files
2. **Content Extraction**: It parses each HTML file to extract:
   - Document titles
   - Main content text (excluding navigation, headers, footers)
   - Document URLs/paths
3. **Index Generation**: Creates a structured JSON index containing the extracted information
4. **Output Creation**: Writes the index file (`wildfly-doc-index.json`) to the specified output directory

### Example Usage

From the `wildfly-doc-indexer` directory:

```bash
# Build the project
mvn clean package

# Generate the index using the parent directory as source and output
java -jar ./target/wildfly-doc-indexer-1.0-SNAPSHOT.jar --work-dir=../ --output-dir=../

# The generated index will be available at ../wildfly-doc-index.json
```

## Generated Index Format

The indexer produces a JSON file containing an array of document objects. Each object includes:

```json
[
  {
    "url": "path/to/document.html",
    "title": "Document Title",
    "content": "Extracted document content for searching..."
  }
]
```

This index format is optimized for client-side search libraries like FlexSearch, enabling:
- **Fast text searching** across all documentation
- **Title and content matching** with relevance scoring
- **Minimal bandwidth usage** through efficient JSON structure
